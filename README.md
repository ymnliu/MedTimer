# Introduction

MedTime is an Apache UIMA based temporal information extraction system developed by the Mayo Clinic NLP program. It extracts and normalizes TIMEX3-based temporal expressions
from clinical text. MedTime has been adapted from the
open-source temporal tagger, HeidelTime (https://github.com/HeidelTime/heideltime)
but reengineered toward the clinical domain.

## What's new

Updated temporal expression extraction module for general purpose clinical texts,
which does not require section times or specific text metadata.

## Installation
Java requirement: Java 1.7 minimum.

If you are using UNIX, simply:

```
./runCPE.sh
```

In the CPE window, go to ```"File"``` -> ```"Open CPE Descriptor"``` and select ```./desc/medtimedesc/collection_process_engine/MedTimeCPE.xml```.
You may change the ```"Input Directory"``` and ```"Output Dir"``` as needed. We suggest to use the default FileCollectionReader and MedTimeWriter.



##  Sub directories included in MedTimer v2.0
 
* javasrc - source folder includes java source codes distributed
* autosrc - source folder automatically generated by JCas_gen for the centralized type system 
* descsrc - contains types and primitive analysis engines, collection readers, and cas consumers (not recommended to modify if you have limited knowledge with respect to UIMA)
* desc - example descriptors for aggregate analysis engines and collection processing engines
* medtaggerdescsrc -- source folders contains types and primitive analysis engines, collection readers, and cas consumers in MedTagger
* lib - a collection of libraries that MedTagger is based on
* resources - resources required to run MedTime (including those for running MedTagger)
* testdata - shipped test data to run all annotators
 
 

## MedTimer UIMA descriptors

### Primary Annotators
	MedTimeAE.xml: finds temporal expressions and normalizes them according to the TIMEX3 TimeML annotation standard

### Cas Consumer
	MedTimeWriter.xml: generates i2b2 Timex3 output format

### Aggregate TAE
	MedTimeAggregateTAE.xml 
	
### Collection Processing Engine
	MedTimeCPE.xml 

## MedTime v1.0 UIMA resources

resources/medtimeresources/i2b2/normalization
- normalized forms of time expression

resources/medtimeresources/i2b2/repattern
- regular expressions of time information

resources/medtimeresources/i2b2/rules
- rules to extract date, time, duration, and frequency

resources/medtimeresources/used\_resources.txt
- all paths used in resources

The detailed explanation of resource usage can be found in HeidelTime Wiki (https://github.com/HeidelTime/heideltime)

## Citation

If you use MedTime, please kindly cite the following paper.
* Sohn S, Wagholikar KB, Li D, Jonnalagadda SR, Tao C, Komandur Elayavilli R, Liu H. "Comprehensive temporal information detection from clinical text: medical events, time, and TLINK identification" J Am Med Inform Assoc. 2013 Sep 1;20(5):836-42.

If you used the lab test result extraction or TEO part of it, please kindly cite:
* Liu S et al. Correlating Lab Test Results in Clinical Notes with Structured Lab Data: A Case Study in HbA1c and Glucose. Proc. AMIA Joint Summits on Translational Science, 2017: p221-228.  


